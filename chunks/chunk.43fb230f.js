function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){E(e,t,n[t])}))}return e}var $={trackingId:null,debug:!1,anonymizeIp:!1,customDimensions:{},resetCustomDimensionsOnPage:[],setCustomDimensionsToPage:!0},x={};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1,n=T(e),a=n.instanceName,i=n.instancePrefix;return{name:"google-analytics",config:O({},$,e),initialize:function(e){var t=e.config,n=e.instance;if(!t.trackingId)throw new Error("No GA trackingId defined");var o,r,c,s,l,u,g,f=t.customDimensions,m=t.customScriptSrc||"https://www.google-analytics.com/analytics.js";if(P(m)&&(o=window,r=document,c="script",s=m,l="ga",o.GoogleAnalyticsObject=l,o.ga=o.ga||function(){(o.ga.q=o.ga.q||[]).push(arguments)},o.ga.l=1*new Date,u=r.createElement(c),g=r.getElementsByTagName(c)[0],u.async=1,u.src=s,g.parentNode.insertBefore(u,g)),!x[a]){var p=O({cookieDomain:t.domain||"auto",siteSpeedSampleRate:t.siteSpeedSampleRate||1,sampleRate:t.sampleRate||100,allowLinker:!0},t.cookieConfig);if(a&&(p.name=a),ga("create",t.trackingId,p),t.debug&&(ga("".concat(i,"set"),"sendHitTask",null),window.ga_debug={trace:!0}),t.anonymizeIp&&ga("".concat(i,"set"),"anonymizeIp",!0),t.tasks){["customTask","previewTask","checkProtocolTask","validationTask","checkStorageTask","historyImportTask","samplerTask","buildHitTask","sendHitTask","timingTask","displayFeaturesTask"].forEach((function(e){if(t.tasks.hasOwnProperty(e)){var n=t.tasks[e];"function"==typeof n?ga(t.tasks[e]):null===n&&ga("".concat(i,"set"),e,n)}}))}var v=(n.user()||{}).traits||{};if(Object.keys(v).length&&f&&Object.keys(f).length){var d=S(v,t);ga("".concat(i,"set"),d)}x[a]=!0}},page:function(e){var n=e.payload,a=e.config,o=e.instance,r=n.properties,c=a.resetCustomDimensionsOnPage,s=a.customDimensions,l=o.getState("context.campaign");if(!P()){if(c&&c.length){var u=c.reduce((function(e,t){return s[t]&&(e[s[t]]=null),e}),{});Object.keys(u).length&&ga("".concat(i,"set"),u)}var g=r.path||document.location.pathname,f={page:g,title:r.title,location:r.url},m={page:g,title:r.title};r.referrer!==document.referrer&&(m.referrer=r.referrer);var p=O({},f,z(l),N(r,a,i));ga("".concat(i,"set"),m),t&&delete p.location,ga("".concat(i,"send"),"pageview",p),t=!0}},track:function(e){var t=e.payload,n=e.config,a=e.instance,i=t.properties,o=t.event,r=i.label,c=i.value;j({hitType:"event",event:o,label:r,category:i.category||"All",value:c,nonInteraction:i.nonInteraction,campaign:a.getState("context.campaign")},n,t)},identify:function(e){var t=e.payload,n=e.config;A(t.userId,t.traits,n)},loaded:function(){return!!window.gaplugins}}}function P(e){return e?!R(e):typeof ga>"u"}function T(e){var t=e.instanceName;return{instancePrefix:t?"".concat(t,"."):"",instanceName:t}}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!P()){var a=T(t),i=a.instancePrefix,o={hitType:e.hitType||"event",eventAction:e.event,eventLabel:e.label,eventCategory:e.category||"All",nonInteraction:void 0!==e.nonInteraction&&!!e.nonInteraction};e.value&&(o.eventValue=q(e.value));var r=z(e),c=N(n.properties,t,i),s=O({},o,r,c);return ga("".concat(i,"send"),"event",s),s}}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=e.name,a=e.source,i=e.medium,o=e.content,r=e.keyword;return n&&(t.campaignName=n),a&&(t.campaignSource=a),i&&(t.campaignMedium=i),o&&(t.campaignContent=o),r&&(t.campaignKeyword=r),t}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.customDimensions;return Object.keys(n).reduce((function(t,a){var i=n[a],o=L(e,a)||e[a];return"boolean"==typeof o&&(o=o.toString()),(o||0===o)&&(t[i]=o),t}),{})}function L(e,t,n,a,i){for(t=t.split?t.split("."):t,a=0;a<t.length;a++)e=e?e[t[a]]:i;return e===i?n:e}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=S(e,t);return Object.keys(a).length?t.setCustomDimensionsToPage?(ga("".concat(n,"set"),a),{}):a:{}}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!P()){var a=T(n),i=a.instancePrefix;if(e&&ga("".concat(i,"set"),"userId",e),Object.keys(t).length){var o=S(t,n);ga("".concat(i,"set"),o)}}}function R(e){var t=document.querySelectorAll("script[src]");return!!Object.keys(t).filter((function(n){return(t[n].src||"")===e})).length}function q(e){return!e||e<0?0:Math.round(e)}var H=C,V=C,B=void 0,G=void 0,M=j,F=A;export{H as default,F as identify,V as init,B as initialize,G as page,M as track};